<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
			<meta http-equiv="X-UA-Compatible" content="IE=edge">
				<meta name="viewport" content="width=device-width, initial-scale=1.0">
					<title>HOMEPAGE</title>
					<style>
            .dropbtn {
  background-color: #04AA6D;
  color: white;
  padding: 16px;
  font-size: 16px;
  border: none;
}

.dropdown {
  position: relative;
  display: inline-block;
}

.dropdown-content {
  display: none;
  position: absolute;
  background-color: #f1f1f1;
  min-width: 160px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  z-index: 1;
}

.dropdown-content a {
  color: black;
  padding: 12px 16px;
  text-decoration: none;
  display: block;
}

.dropdown:hover .dropdown-content {display: block;}

.dropdown:hover .dropbtn {background-color: #3e8e41;}
                        .menu-bar {
                          border-radius: 25px;
                          height: -webkit-fit-content;
                          height: -moz-fit-content;
                          height: fit-content;
                          display: inline-flex;
                          background-color: rgba(0, 0, 0, 0.4);
                          -webkit-backdrop-filter: blur(10px);
                          backdrop-filter: blur(10px);
                          align-items: center;
                          padding: 0 10px;
                          margin: 50px 0 0 0;
                        }
                        .menu-bar li {
                          list-style: none;
                          color: white;
                          font-family: sans-serif;
                          font-weight: bold;
                          padding: 12px 16px;
                          margin: 0 8px;
                          position: relative;
                          cursor: pointer;
                          white-space: nowrap;
                        }
                        .menu-bar li::before {
                          content: " ";
                          position: absolute;
                          top: 0;
                          left: 0;
                          height: 100%;
                          width: 100%;
                          z-index: -1;
                          transition: 0.2s;
                          border-radius: 25px;
                        }
                        .menu-bar li:hover {
                          color: black;
                        }
                        .menu-bar li:hover::before {
                          background: linear-gradient(to bottom, #e8edec, #d2d1d3);
                          box-shadow: 0px 3px 20px 0px black;
                          transform: scale(1.2);
                        }
                        * {
                        box-sizing: border-box;
                        }
                        
                        /* Add a gray background color with some padding */
                        body {
                          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
                          padding: 20px;
                          background: #f1f1f1;
                        }
                        
                        /* Header/Blog Title */
                        .header {
                          padding: 30px;
                          font-size: 40px;
                          text-align: center;
                          background: white;
                        }
                        
                        /* Create two unequal columns that floats next to each other */
                        /* Left column */
                        .leftcolumn {   
                          float: center;
                          width: 50%;
                        }
                        
                        /* Right column */
                        .rightcolumn {
                          float: left;
                          width: 25%;
                          padding-left: 20px;
                        }
                        
                        /* Fake image */
                        .fakeimg {
                          background-color: #aaa;
                          width: 100%;
                          padding: 20px;
                        }
                        
                        /* Add a card effect for articles */
                        .card {
                           background-color: white;
                           padding: 20px;
                           margin-top: 20px;
                           border-radius: 4px;
                        }
                        
                        /* Clear floats after the columns */
                        .row:after {
                          content: "";
                          display: table;
                          clear: both;
                        }
                        
                        /* Footer */
                        .footer {
                          padding: 20px;
                          text-align: center;
                          background: #ddd;
                          margin-top: 20px;
                        }
                        
                        /* Responsive layout - when the screen is less than 800px wide, make the two columns stack on top of each other instead of next to each other */
                        @media screen and (max-width: 800px) {
                          .leftcolumn, .rightcolumn {   
                            width: 100%;
                            padding: 0;
                          }
                        }
					</style>
                     <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
				</head>
				<center>
				<body>
					<ul style="position:fixed; top: -7%; right:20%;" class="menu-bar">
                        <div style="float: left; color: whitesmoke;">
                        <label for="search">Search:</label>
                        <input type="search" id="search" name="search">
                        </div>
						<li>Home</li>
						<li>Friends</li>
						<li>Stories</li>
						<li>Messages</li>
						<li>Games</li>
            <li><a href="/settings" style = "text-decoration: none; color: white;">Settings</a></li>
            <div class="dropdown">
              <li><a href="/home/post" style="border-radius: 360px;" class="dropbtn">+</a></li>
              <div style="border-radius: 12px;" class="dropdown-content">
                <!--<a href="/home/blog">Blog</a>
                <a href="/home/img">Picture</a>
                <a href="/home/vid">Video</a>-->
              </div>
            </div>
                        <a href="/logout">LOGOUT</a>
					</ul>
    <br><br>
             <!--      <form style="background-color: #aaa; width: 50%; text-align: left;" action="/home" method="POST" enctype="multipart/form-data">
                        <label for="img">Select Image:</label>
                        <input type="file" id="img" name="img" accept="image/*"><br>
                        <label for="title">Title:</label>
                        <input type="text" id="title" name="title" required><br>
                        <label for="description" required>Description:</label>
                        <input type="text" id="description" name="description" ><br>
                        <input type="submit">
                      </form>-->
                      
    
        {% if not posts %}
      
            <p>POSTLESS HOOTERS</p>
  
        {% endif %}
  
        {% if posts %}
        {% set poster = [] %}  
          {% for post in posts%}    
          {% set i = loop.index-1 %}
            {% if posts[i][0] != "" %}

                    <div class="row">
                        <div class="leftcolumn">
                        <div class="card">
                          <div style="display: inline; width: 100%; height: 1px;">
                            <h2 type="button" style="float: right;">...</h2>
                            {% if posts[i][9] == "data:image/jpeg;base64,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" %}
                            <img style="float: left; height:50px; width:50px; border-radius: 360%;" src="{{ posts[i][9] }}">
                            {%else%}
                            <img style="float: left; height:50px; width:50px; border-radius: 360%;" src="../static/profile/{{ posts[i][9] }}">
                            {%endif%}
                            <p class="name" style="float: top; text-align: left; border-bottom:1px solid rgb(0, 0, 0); width: 100%; height: 50px;"> &nbsp {{ posts[i][3] }}</p> 
                          </div>
                            <h2 class="title">{{ posts[i][1] }}</h2>
                            <h5 class="date" >{{ posts[i][2] }}</h5>
                            <img class="fakeimg" src="../static/posts/{{ posts[i][0] }}" style="height: 400px; background-color: white;">
                            <button style="float: left;" class="likes" id="{{posts[i][2]}}" type="{{posts[i][5]}}" onclick="likes('{{posts[i][2]}}',{{posts[i][6]}},'{{posts[i][5]}}','{{email}}')">Likes: {{ posts[i][6] }}</button>
                            <!--<p class="description">{{ posts[i][4] }}</p>--><br><br><br>
                            <button style="float: left;" class="view_comments" onclick="showComments('commento{{i}}')" style="text-align: left;">View Comments</button>
                            <br><br>
                            <div style="display: none; overflow: scroll; height: 100px; text-align: left;" class="comments" id="commento{{i}}">

                              
                              <div id="comment-{{i}}"></div>
                              {% for comment in comments %}
                                {% set ii = loop.index-1 %}
                                  {% if i==i%}
                                  {% if comments[ii][0] == posts[i][2] %}

                                    <p style="font-size: 12px;"><strong>{{ comments[ii][1] }}</strong> {{ comments[ii][2] }} ({{comments[ii][3]}})</p>
                                
                                  {%endif%}
                                  {%endif%}
                              {%endfor%}

                            </div>
                            <div style="position: absolute;"><label for="comment" required>Comment:</label><input class="comment" type="text" id="comment{{i}}" name="comment" ><input class="commentButton" onclick='setNameId("{{ posts[i][2] }}","{{ name }}", "comment{{i}}","comment-{{i}}")' type="submit">
                            </div><br>
                        </div>
                        </div>
                    </div>

                   
                    {% else %}

                    <div class="row" >
                        <div class="leftcolumn">
                        <div class="card" style="text-align: left;">
                          <div style="display: inline; width: 100%; height: 1px;">
                            <h2 type="button" style="float: right;">...</h2>
                           {% if posts[i][9] == "data:image/jpeg;base64,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" %}
                            <img style="float: left; height:50px; width:50px; border-radius: 360%;" src="{{ posts[i][9] }}">
                            {%else%}
                            <img style="float: left; height:50px; width:50px; border-radius: 360%;" src="../static/profile/{{ posts[i][9] }}">
                            {%endif%}
                            <p class="name" style="float: top; text-align: left; border-bottom:1px solid rgb(0, 0, 0); width: 100%; height: 50px;"> &nbsp {{ posts[i][3] }}</p> 
                            </div>
                            <h2 class="title">{{ posts[i][1] }}</h2>
                            <h5 class="date" >{{ posts[i][2] }}</h5>
                            <p style="background-color: #aaa;" class="description">{{ posts[i][4] }}</p>
                            <button class="likes" id="{{posts[i][2]}}" type="{{posts[i][5]}}" onclick="likes('{{posts[i][2]}}',{{posts[i][6]}},'{{posts[i][5]}}','{{email}}')">Likes: {{ posts[i][6] }}</button>
                            <br><br><button onclick="showComments('commento{{i}}')" class="view_comments">View Comments</button><br><br>
                            <div style="display: none; overflow: scroll; height: 100px;" class="comments" id="commento{{i}}">

                              <div id="comment-{{i}}"></div>
                              {% for comment in comments %}
                                {% set ii = loop.index-1 %}
                                  {% if i==i%}
                                  {% if comments[ii][0] == posts[i][2] %}

                                    <p style="font-size: 12px;"><strong>{{ comments[ii][1] }}</strong> {{ comments[ii][2] }} ({{comments[ii][3]}})</p>
                                
                                  {%endif%}
                                  {%endif%}
                              {%endfor%}

                            </div>
                            <div style="position: absolute;"><label for="comment" required>Comment:</label><input class="comment" type="text" id="comment{{i}}" name="comment" ><input class="commentButton" onclick='setNameId("{{ posts[i][2] }}","{{ name }}", "comment{{i}}","comment-{{i}}")' type="submit">
                            </div><br>
                        </div>
                        </div>
                    </div>

                {%endif%}
          {%endfor%}
  
        {% endif %}

  <!--
  <div class="rightcolumn">
    <div class="card">
      <h2>About Me</h2>
      <div class="fakeimg" style="height:100px;">Image</div>
      <p>Some text about me in culpa qui officia deserunt mollit anim..</p>
    </div>
    <div class="card">
      <h3>Popular Post</h3>
      <div class="fakeimg">Image</div><br>
      <div class="fakeimg">Image</div><br>
      <div class="fakeimg">Image</div>
    </div>
    <div class="card">
      <h3>Follow Me</h3>
      <p>Some text..</p>
    </div>
  </div>
</div> --> 

<script>
  i=0;
    function likes(post,likes,check,email){
        console.log(email)
        if (check.includes(email) && i<2){
            i=2
            bb = 0
        }
        if (check.includes(email)==false && i<2){ 
          i=1
          bb = 1
        }

        if (i%2==0){
          if (bb == 0) {
          document.getElementById(post).innerHTML = "Likes: " + (likes-1);
          } else {document.getElementById(post).innerHTML = "Likes: " + (likes);}
        } else {
          if (bb==1){
          document.getElementById(post).innerHTML = "Likes: " + (likes+1);}
          else{document.getElementById(post).innerHTML = "Likes: " + (likes);}
        }
        i=i+1
        ajax_follow(post)
    }
    
    function ajax_follow(name) {
    $.ajax({url: "/like/" + name, success: function(result){
    }});}

    id = ""
    name = ""
    cum = ""
    its = ""

    function setNameId(ide,nom,com,oke){
      id = ide;
      name = nom;
      cum = com;
      its = oke;
    }


    function comment(comment) {
    $.ajax({url: "/comment/"+comment+"/"+id, success: function(result){
    }});}

    $(document).ready(function () {
        $(".commentButton").on("click", function () {
            var value = $("#"+cum).val();
            comment(value)
            $("#"+its).append("<p><strong>"+name+"</strong> "+value+" (now)</p>")
        });
    });
    
    function showComments(stuff){
      $(document).ready(function () {
        if ($("#"+stuff).is(":hidden")){
          $("#"+stuff).show();
        } else {
          $(document).ready(function () {
          $("#"+stuff).hide();
        });
        }
        });

    }

  </script>

				</body>
                </center>
			</html>